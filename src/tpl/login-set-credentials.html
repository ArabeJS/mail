<div class="view-login view-login-set-credentials">

  <div class="logo">
    <img src="img/whiteout_logo.svg" alt="whiteout.io">
  </div><!--/logo-->

  <div class="content">
    <p><b>Login.</b> Please enter your email address and password. The password is used to authenticate directly with your mail provider and is not sent to our servers.</p>

    <form name="form">

      <div>
        <label class="input-error-message" ng-show="connectionError">Connection failed. Please check your credentials!</label>
        <label class="input-error-message" ng-show="form.$invalid || credentialsIncomplete">Please fill out all required fields!</label>
        <br>
        <input class="input-text" type="email" required ng-model="emailAddress" placeholder="Email address" focus-me="true" tabindex="1" spellcheck="false"></input>
        <input class="input-text" type="text" ng-model="realname" placeholder="Full name (optional)" tabindex="2"></input>
        <input ng-hide="useOAuth" ng-required="!useOAuth" class="input-text" ng-class="{'input-text-error': connectionError}" type="password" ng-model="password" placeholder="Password" tabindex="3">
      </div><!--/credentials-->

      <a href="#" wo-touch='showDetails = !showDetails; $event.preventDefault()'>{{showDetails ? "Hide Options" : "Show Options"}}</a>

      <div class='details' ng-show='showDetails'>
        <input ng-hide="useOAuth" class="input-text username" type="text" ng-model="username" placeholder="User (optional)"></input>

        <div class="settings">
          <input required ng-disabled="hasProviderPreset" class="input-text" type="text" ng-model="imapHost" placeholder="IMAP server" pattern="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$"></input>
          <input required ng-disabled="hasProviderPreset" class="input-text" type="number" ng-model="imapPort" placeholder="Port" min="0" max="65535" step="1" pattern="\d+"></input>
          <label for="imapSecure"><input ng-disabled="hasProviderPreset" class="input-checkbox" type="checkbox" ng-model="imapSecure" name="imapSecure" checked>TLS</label>
        </div><!--/.settings-->

        <div class="settings">
          <input required ng-disabled="hasProviderPreset" class="input-text" type="text" ng-model="smtpHost" placeholder="SMTP server" pattern="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$"></input>
          <input required ng-disabled="hasProviderPreset" class="input-text" type="number" ng-model="smtpPort" placeholder="Port" min="0" max="65535" step="1" pattern="\d+"></input>
          <label for="smtpSecure"><input ng-disabled="hasProviderPreset" class="input-checkbox" type="checkbox" ng-model="smtpSecure" name="smtpSecure" checked>TLS</label>
        </div><!--/.settings-->
      </div><!--/.details-->

      <div ng-show="busy">
        <span class="spinner"></span>
      </div>

      <div>
        <button type="submit" ng-disabled="form.$invalid" ng-click="test()" class="btn">Login</button>
      </div>

    </form>
  </div><!--/.content-->
</div>