<!DOCTYPE html>
<html style="overflow-y: auto">
  <head>
    <meta charset="utf-8">
    <title>JavaScript Unit Tests</title>
    <link rel="stylesheet" href="../lib/mocha.css" />

  </head>
  <body>
    <div id="mocha"></div>

    <script>
      //
      // Polyfills
      //
      
      (function() {
        'use strict';
        // Mozilla bind polyfill because phantomjs is stupid
        if (!Function.prototype.bind) {
          Function.prototype.bind = function(oThis) {
            if (typeof this !== "function") {
              // closest thing possible to the ECMAScript 5 internal IsCallable function
              throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
            }

            var aArgs = Array.prototype.slice.call(arguments, 1),
              fToBind = this,
              FNOP = function() {},
              fBound = function() {
                return fToBind.apply(this instanceof FNOP && oThis ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));
              };

            FNOP.prototype = this.prototype;
            fBound.prototype = new FNOP();

            return fBound;
          };
        }

        // a warm round of applause for phantomjs for missing events
        (function() {
          function CustomEvent(event, params) {
            params = params || {
              bubbles: false,
              cancelable: false,
              detail: undefined
            };
            var evt = document.createEvent('CustomEvent');
            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
            return evt;
          }

          CustomEvent.prototype = window.Event.prototype;

          window.CustomEvent = CustomEvent;
        })();
      })();
    </script>
    
    <script src="../lib/chai.js"></script>
    <script src="../lib/mocha.js"></script>
    <script src="../lib/sinon.js"></script>

    <script>
      window.expect = chai.expect;
      mocha.setup('bdd');
    </script>

    <script src="index.js"></script>
    
    <script>
      mocha.checkLeaks();
      mocha.globals([]);
      mocha.run();
    </script>
  </body>
</html>
